def create_model(scale=1):
    """
    Создает модель спинного мозга с учетом анатомической и функциональной организации.
    
    Args:
        scale (float): Масштабный коэффициент для регулирования количества нейронов в популяциях (по умолчанию 1).
                       Допустимые значения: от 1 до 5.
    
    Returns:
        netParams: Объект NetParams, содержащий параметры сети, включая популяции нейронов, синаптические связи 
                   и параметры клеток.
    
    Описание:
        Функция создает модель спинного мозга, включая популяции нейронов для шейного (C1–C8), грудного (T1–T12), 
        поясничного (L1–L5) и крестцового (S1–S5) отделов. Для каждой популяции задаются координаты, количество 
        нейронов и синаптические связи. Также настраиваются параметры клеток (например, диаметр, длина, ионные токи).
    """

def set_background_activity(netParams, activity_scale=1):
    """
    Задает фоновую активность нейронных популяций для моделирования базовой нейронной активности.
    
    Args:
        netParams: Объект NetParams, содержащий параметры сети.
        activity_scale (float): Уровень фоновой активности (от 1 до 3, по умолчанию 1).
                                Чем выше значение, тем выше частота стимуляции и уровень шума.
    
    Returns:
        netParams: Обновленный объект NetParams с добавленными источниками фоновой активности.
    
    Описание:
        Функция создает стимуляцию через объект NetStim для каждой популяции нейронов. Частота стимуляции 
        масштабируется линейно в зависимости от параметра activity_scale. Уровень шума также увеличивается 
        с ростом activity_scale, что позволяет моделировать более хаотичную активность.
    """

def set_pain(netParams, vertebrae, pain_intensity=1, side="both", pain_duration=500, sim_duration=1000):
    """
    Моделирует болевой сигнал, передаваемый через C-волокна в указанных позвонках.
    
    Args:
        netParams: Объект NetParams, содержащий параметры сети.
        vertebrae (list): Список позвонков, где генерируется боль (например, ["C1", "C2"]).
        pain_intensity (float): Интенсивность боли (от 1 до 3, по умолчанию 1).
        side (str): Сторона, на которой генерируется боль ("left", "right", "both", по умолчанию "both").
        pain_duration (float): Длительность боли (в мс, по умолчанию 500 мс).
        sim_duration (float): Длительность симуляции (в мс, по умолчанию 1000 мс).
    
    Returns:
        tuple: Обновленный объект netParams и словарь pain_info с информацией о времени начала и длительности боли.
    
    Описание:
        Функция создает популяции C-волокон в указанных позвонках и на заданных сторонах. Для моделирования боли 
        используется объект NetStim, частота которого зависит от параметра pain_intensity. C-волокна соединяются 
        со спинно-таламическими нейронами перекрестно и с интернейронами на той же стороне.
    """

def set_electrode(x=15000, y=50000, z=3500, num_electrodes=1, spacing=5000, axis="y"):
    """
    Задает координаты виртуального электрода или цепочки электродов для записи сигналов.
    
    Args:
        x (float): Координата X начальной точки (по умолчанию 15000).
        y (float): Координата Y начальной точки (по умолчанию 50000).
        z (float): Координата Z начальной точки (по умолчанию 3500).
        num_electrodes (int): Количество электродов (по умолчанию 1).
        spacing (float): Интервал между электродами в микрометрах (по умолчанию 5000).
        axis (str): Ось, вдоль которой располагаются электроды ("x", "y", "z", по умолчанию "y").
    
    Returns:
        list: Список координат электродов в формате [(x1, y1, z1), (x2, y2, z2), ...].
    
    Описание:
        Функция размещает один или несколько электродов в трехмерном пространстве. Если num_electrodes > 1, 
        электроды размещаются вдоль указанной оси с фиксированным шагом.
    """

def run_simulations(netParams, num_runs=1, sim_duration=1000, record_step=0.025, save_formats=None):
    """
    Запускает несколько симуляций и управляет наборами данных.
    
    Args:
        netParams: Объект NetParams, содержащий параметры сети.
        num_runs (int): Количество прогонов (размер набора данных, по умолчанию 1).
        sim_duration (float): Длительность симуляции (в мс, по умолчанию 1000 мс).
        record_step (float): Шаг записи данных (в мс, по умолчанию 0.025 мс).
        save_formats (list): Форматы для сохранения данных (например, ['json', 'pickle'], по умолчанию None).
    
    Описание:
        Функция настраивает параметры симуляции, включая длительность, шаг записи и записываемые данные 
        (мембранный потенциал V_soma). Результаты сохраняются в указанных форматах (JSON, Pickle).
    """

def calculate_electrode_signal(electrode_positions, power=2, save_to_csv=False, run_idx=1, pain_info=None, trim_start_ms=100):
    """
    Вычисляет сигналы на электродах на основе мембранных потенциалов нейронов.
    
    Args:
        electrode_positions (list): Список координат электродов.
        power (float): Степень затухания сигнала с расстоянием (по умолчанию 2).
        save_to_csv (bool): Флаг для сохранения данных в CSV (по умолчанию False).
        run_idx (int): Индекс прогона (по умолчанию 1).
        pain_info (dict): Информация о боли (время начала и длительность стимуляции).
        trim_start_ms (float): Время, которое обрезается с начала записи (по умолчанию 100 мс).
    
    Returns:
        dict: Сигналы на электродах (ключи - индексы электродов, значения - массивы сигналов).
    
    Описание:
        Функция вычисляет вклад каждого нейрона в сигнал на электроде. Вклад обратно пропорционален расстоянию 
        между нейроном и электродом в степени power. Если save_to_csv=True, данные сохраняются в CSV-файл.
    """

def plot_electrode_pain_signals(electrode_positions, signals, pain_info=None, trim_start_ms=100):
    """
    Визуализирует сигналы, записанные с электродов, и отображает интервалы боли.
    
    Args:
        electrode_positions (list): Список координат электродов.
        signals (dict): Словарь временных сигналов на электродах.
        pain_info (dict): Информация о боли (время начала и длительность стимуляции).
        trim_start_ms (float): Время, которое обрезается с начала записи (по умолчанию 100 мс).
    
    Описание:
        Функция строит графики сигналов для каждого электрода. Если pain_info указан, интервалы боли 
        выделяются вертикальными линиями или заливкой.
    """
